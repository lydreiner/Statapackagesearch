
  ___  ____  ____  ____  ____ (R)
 /__    /   ____/   /   ____/
___/   /   /___/   /   /___/   16.1   Copyright 1985-2019 StataCorp LLC
  Statistics/Data analysis            StataCorp
                                      4905 Lakeway Drive
     MP - Parallel Edition            College Station, Texas 77845 USA
                                      800-STATA-PC        https://www.stata.com
                                      979-696-4600        stata@stata.com
                                      979-696-4601 (fax)

Stata license: 5-user 8-core network perpetual
Serial number: 501606316764
  Licensed to: LDI Econ Cornell University
               Ithaca, NY

Notes:
      1. Stata is running in batch mode.
      2. Unicode is supported; see help unicode_advice.
      3. More than 2 billion observations are allowed; see help obs_advice.
      4. Maximum number of variables is set to 5,000; see help set_maxvar.

. do "run_aearep-1956.do" 

. // Thu Apr 22 20:44:38 EDT 2021
. global scandir "/home/lv39/Workspace/AEA/all/"

. global aearep  "aearep-1956"

. di "Timer on: `c(current_date)' `c(current_time)'"
Timer on: 20 May 2021 14:24:01

. include scan_packages.do

. ** Master file for text-mining based package search
. 
. ***************************
. * Step 1: Preliminaries   *
. ***************************
. clear all

. 
. // Point to location of folder with .do files to scan for potential packages:
. // Probably the only thing you need to change:
. 
. global codedir "$scandir/$aearep"

. // Point to location of "scanning_framework" folder which contains scanning 
. // code, package list, and stopwords & subwords files
. // Might need to create an absolute path, but normally not necessary
. 
. local pwd : pwd

. global rootdir "`pwd'"

. 
. // Set globals below
. // Configure a few features. Probably not necessary unless you know what 
. // you are doing.
. 
. global savefiles = 1 // Set to 1 if you want to save the list of files that w
> as parsed. Useful

. global createlog = 0 // If you wish to create a log file of the parsing/match
> ing process,

. global saveexcel = 1 // Set to 1 if you want to save the Excel report into th
> e original directory (codedir)

. global savehot   = 0 // Set to 1 if you want to save the "whatshot" report. U
> sually not needed.

. 
. 
. //################## NO NEED TO CHANGE ANYTHING BELOW THIS ##################
> #############
. // DO NOT CHANGE Points to location of subwords and stopwords 
. global auxdir "$rootdir/ado/auxiliary"

. tempfile a

. local parsed "`a'.d"

. mkdir `parsed' 

. 
. // Install packages, provide system info
. 
. global reportexcel "candidatepackages.xlsx"

. if ( $saveexcel == 1 ) { 
.         global reportfile "$codedir/$reportexcel"
. }

. else {
.         global reportfile "$rootdir/$reportexcel"
. }

. 
. /* It will provide some info about how and when the program was run */
. /* See https://www.stata.com/manuals13/pcreturn.pdf#pcreturn */
. local variant = cond(c(MP),"MP",cond(c(SE),"SE",c(flavor)) )  

. // alternatively, you could use 
. // local variant = cond(c(stata_version)>13,c(real_flavor),"NA")  
. 
. di "=== SYSTEM DIAGNOSTICS ==="
=== SYSTEM DIAGNOSTICS ===

. di "Stata version: `c(stata_version)'"
Stata version: 16.1

. di "Updated as of: `c(born_date)'"
Updated as of: 30 Jun 2020

. di "Variant:       `variant'"
Variant:       MP

. di "Processors:    `c(processors)'"
Processors:    8

. di "OS:            `c(os)' `c(osdtl)'"
OS:            Unix 

. di "Machine type:  `c(machine_type)'"
Machine type:  PC (64-bit x86-64)

. di "=========================="
==========================

. 
. 
. /* install any packages locally */
. capture mkdir "$rootdir/ado"

. sysdir set PERSONAL "$rootdir/ado/personal"

. sysdir set PLUS     "$rootdir/ado/plus"

. sysdir set SITE     "$rootdir/ado/site"

. sysdir
   STATA:  /usr/local/stata16/
    BASE:  /usr/local/stata16/ado/base/
    SITE:  /home/lv39/Workspace/AEA/all/Statapackagesearch/Stata_scan_code/ado/
> site/
    PLUS:  /home/lv39/Workspace/AEA/all/Statapackagesearch/Stata_scan_code/ado/
> plus/
PERSONAL:  /home/lv39/Workspace/AEA/all/Statapackagesearch/Stata_scan_code/ado/
> personal/
OLDPLACE:  ~/ado/

. 
. /* add necessary packages to perform the scan & analysis to the macro */
. 
. * *** Add required packages from SSC to this list ***
.     local ssc_packages "filelist txttool ftools moremata"

.     
.     if !missing("`ssc_packages'") {
.         foreach pkg in `ssc_packages' {
  2.             dis "Installing `pkg'"
  3.             ssc install `pkg', replace
  4.         }
Installing filelist
checking filelist consistency and verifying not already installed...
all files already exist and are up to date.
Installing txttool
checking txttool consistency and verifying not already installed...
all files already exist and are up to date.
Installing ftools
checking ftools consistency and verifying not already installed...
all files already exist and are up to date.
Installing moremata
checking moremata consistency and verifying not already installed...
all files already exist and are up to date.
.     }

. 
. /* after installing all packages, it may be necessary to issue the mata mlib 
> index command */
.         mata: mata mlib index
.mlib libraries to be searched are now
    lmatabase;lmatameta;lmatanumlib;lmatasem;lmatatab;lmatamixlog;lmatagsem;lma
> tamcmc;lmatasp;lmatapostest;lmataerm;lmatafc;lmataopt;lmatasvy;lmatalasso;lma
> tapss;lmatapath;lmatami;lmataado;lmoremata11;lmoremata;lmmtxttool;lmoremata10
> ;lmoremata14

. 
. 
. set more off

. set maxvar 120000


. 
. ********************************************************
. * Step 2: Collect list of all packages hosted at SSC   *
. ********************************************************
. // Collect top hits at SSC for the past month 
. tempfile whatshot

. tempfile packagelist

. 
. cap log close

. log using "`whatshot'", replace text
(note: file /tmp/St12083.000003 not found)
-------------------------------------------------------------------------------
      name:  <unnamed>
       log:  /tmp/St12083.000003
  log type:  text
 opened on:  20 May 2021, 14:24:08

. * if the # of available packages ever exceeds 10000, adjust the line below
. ssc whatshot, n(10000)
